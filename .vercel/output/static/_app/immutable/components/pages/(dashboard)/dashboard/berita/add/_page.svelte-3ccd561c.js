import{S as ne,i as de,s as ue,P as ce,Q as fe,k as f,q as N,a as L,v as pe,l as p,m as v,r as j,h as m,c as R,w as me,n as s,b as Q,F as l,R as te,x as ge,I as $,T as he,U as be,f as _e,t as ve,y as ye,M as oe,p as ae,K as se}from"../../../../../../chunks/index-2cc7f77f.js";import{r as le,s as Ee,u as Ie,a as ke,D as De,d as we,A as Te,C as re}from"../../../../../../chunks/firebase-8ec4c989.js";import{g as xe}from"../../../../../../chunks/navigation-75ff2ebc.js";import{s as Be}from"../../../../../../chunks/lib-8baa1bf8.js";import{E as Le}from"../../../../../../chunks/Editor-52e1c4d7.js";import"../../../../../../chunks/index.esm2017-523da5de.js";import"../../../../../../chunks/singletons-b88798ed.js";function Re(n){let t,a,d,i,e,g,u,E,I,c;return{c(){t=f("div"),a=f("div"),d=f("div"),i=L(),e=f("input"),g=L(),u=f("div"),E=N("Sangat disarankan mengunakan foto dengan aspect ratio 16:9 !"),this.h()},l(h){t=p(h,"DIV",{class:!0});var r=v(t);a=p(r,"DIV",{class:!0});var b=v(a);d=p(b,"DIV",{style:!0,class:!0}),v(d).forEach(m),b.forEach(m),i=R(r),e=p(r,"INPUT",{class:!0,type:!0,accept:!0,name:!0,id:!0}),g=R(r),u=p(r,"DIV",{class:!0});var x=v(u);E=j(x,"Sangat disarankan mengunakan foto dengan aspect ratio 16:9 !"),x.forEach(m),r.forEach(m),this.h()},h(){ae(d,"width",n[2]),s(d,"class","h-1 bg-sky-900 transition-transform duration-300"),s(a,"class","w-full h-1 bg-slate-300 mt-1 mb-2"),s(e,"class","px-4 py-1 rounded text-sm cursor-pointer"),s(e,"type","file"),s(e,"accept","image/*"),s(e,"name","image"),s(e,"id","image"),s(u,"class","text-xs px-2 mb-1 font-bold"),s(t,"class","bg-white rounded")},m(h,r){Q(h,t,r),l(t,a),l(a,d),l(t,i),l(t,e),l(t,g),l(t,u),l(u,E),I||(c=[$(e,"input",n[8]),$(e,"change",n[12])],I=!0)},p(h,r){r&4&&ae(d,"width",h[2])},d(h){h&&m(t),I=!1,oe(c)}}}function Ve(n){let t,a,d;return{c(){t=f("div"),a=f("img"),this.h()},l(i){t=p(i,"DIV",{class:!0});var e=v(t);a=p(e,"IMG",{src:!0,alt:!0}),e.forEach(m),this.h()},h(){se(a.src,d=n[1])||s(a,"src",d),s(a,"alt",""),s(t,"class","bg-white rounded p-2")},m(i,e){Q(i,t,e),l(t,a)},p(i,e){e&2&&!se(a.src,d=i[1])&&s(a,"src",d)},d(i){i&&m(t)}}}function Se(n){let t,a,d,i,e,g,u,E,I,c,h,r,b,x,A,D,q,M,w,_,k,C,V,B,F,U,G,H;function ie(o){n[11](o)}let J={scriptSrc:n[7]+"/tinymce/tinymce.min.js",apiKey:"8yjj0pk6spamsan2bcc7scpep4hxu72c5q9q4vf7mmyr2t84"};n[3]!==void 0&&(J.value=n[3]),D=new Le({props:J}),ce.push(()=>fe(D,"value",ie));function W(o,y){return o[1]?Ve:Re}let O=W(n),T=O(n);return{c(){t=f("section"),a=f("div"),d=N("buat berita"),i=L(),e=f("form"),g=f("div"),u=f("label"),E=N("Title"),I=L(),c=f("input"),h=L(),r=f("div"),b=f("label"),x=N("Body"),A=L(),pe(D.$$.fragment),M=L(),w=f("div"),_=f("label"),k=N("Image"),C=L(),T.c(),V=L(),B=f("input"),this.h()},l(o){t=p(o,"SECTION",{class:!0});var y=v(t);a=p(y,"DIV",{class:!0});var P=v(a);d=j(P,"buat berita"),P.forEach(m),i=R(y),e=p(y,"FORM",{class:!0,method:!0});var S=v(e);g=p(S,"DIV",{class:!0});var z=v(g);u=p(z,"LABEL",{for:!0});var X=v(u);E=j(X,"Title"),X.forEach(m),I=R(z),c=p(z,"INPUT",{type:!0,class:!0,name:!0,id:!0}),z.forEach(m),h=R(S),r=p(S,"DIV",{class:!0});var K=v(r);b=p(K,"LABEL",{for:!0});var Z=v(b);x=j(Z,"Body"),Z.forEach(m),A=R(K),me(D.$$.fragment,K),K.forEach(m),M=R(S),w=p(S,"DIV",{class:!0});var Y=v(w);_=p(Y,"LABEL",{for:!0});var ee=v(_);k=j(ee,"Image"),ee.forEach(m),C=R(Y),T.l(Y),Y.forEach(m),V=R(S),B=p(S,"INPUT",{class:!0,type:!0}),S.forEach(m),y.forEach(m),this.h()},h(){s(a,"class","py-2 font-semibold text-lg uppercase"),s(u,"for","title"),c.required=!0,s(c,"type","text"),s(c,"class","py-1 px-4 text-sm rounded"),s(c,"name","title"),s(c,"id","title"),s(g,"class","flex flex-col font-semibold gap-1"),s(b,"for","title"),s(r,"class","flex flex-col font-semibold gap-1 z-0"),s(_,"for","image"),s(w,"class","flex flex-col font-semibold gap-1 z-0"),s(B,"class",F="py-2 px-4 font-bold rounded block "+n[5]+" cursor-pointer"),B.disabled=n[6],s(B,"type","submit"),B.value="Tambah",s(e,"class","flex flex-col gap-4"),s(e,"method","post"),s(t,"class","dashboard-section")},m(o,y){Q(o,t,y),l(t,a),l(a,d),l(t,i),l(t,e),l(e,g),l(g,u),l(u,E),l(g,I),l(g,c),te(c,n[0]),l(e,h),l(e,r),l(r,b),l(b,x),l(r,A),ge(D,r,null),l(e,M),l(e,w),l(w,_),l(_,k),l(w,C),T.m(w,null),l(e,V),l(e,B),U=!0,G||(H=[$(c,"input",n[10]),$(e,"submit",he(n[9]))],G=!0)},p(o,[y]){y&1&&c.value!==o[0]&&te(c,o[0]);const P={};!q&&y&8&&(q=!0,P.value=o[3],be(()=>q=!1)),D.$set(P),O===(O=W(o))&&T?T.p(o,y):(T.d(1),T=O(o),T&&(T.c(),T.m(w,null))),(!U||y&32&&F!==(F="py-2 px-4 font-bold rounded block "+o[5]+" cursor-pointer"))&&s(B,"class",F),(!U||y&64)&&(B.disabled=o[6])},i(o){U||(_e(D.$$.fragment,o),U=!0)},o(o){ve(D.$$.fragment,o),U=!1},d(o){o&&m(t),ye(D),T.d(),G=!1,oe(H)}}}function Ue(n,t,a){const d="http://127.0.0.1:3000";let i=" ",e=!1,g="0%",u=" ",E,I,c,h="bg-slate-300 text-slate-500",r="disabled",b=new Date,x;const A=async()=>{setTimeout(()=>{const _=E[0],k=_.name.split(".").pop();I=`${b.getDate()}-${b.getMonth().toString()}-${b.getFullYear().toString()}-berita-${Math.floor(Math.random()*1e4+1)}.${k}`,console.log(I),x=le(Ee,"images/"+I),Ie(x,_).on("state_changed",V=>{a(2,g=V.bytesTransferred/V.totalBytes*100+"%")},V=>{alert(V)},()=>{alert("image berhasil di upload"),a(1,e=URL.createObjectURL(_)),a(5,h="bg-green-500 text-white hover:bg-green-400"),a(6,r="")})},500)},D=async()=>{a(5,h="bg-slate-300 text-slate-500"),a(6,r="disabled"),await ke(le(x)).then(k=>{c=k}).catch(k=>{alert("error")});const _=De(we,"berita");try{const k=await Te(_,{title:i,slug:Be(i),imageUrl:c,imageName:I,body:u,year:b.getFullYear(),createdAt:re(),updateAt:re()});console.log("Document written with ID: ",k.id),xe("/dashboard/berita")}catch(k){console.error("Error adding document: ",k)}};function q(){i=this.value,a(0,i)}function M(_){u=_,a(3,u)}function w(){E=this.files,a(4,E)}return[i,e,g,u,E,h,r,d,A,D,q,M,w]}class Fe extends ne{constructor(t){super(),de(this,t,Ue,Se,ue,{})}}export{Fe as default};
