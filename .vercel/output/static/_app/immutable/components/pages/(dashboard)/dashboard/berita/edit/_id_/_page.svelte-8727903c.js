import{S as le,i as re,s as oe,P as ie,Q as ne,k as f,q,a as V,v as de,l as m,m as I,r as A,h as n,c as R,w as ce,n as l,b as C,F as a,R as ee,x as ue,I as F,T as fe,U as me,f as pe,t as be,y as ge,M as se,K as te,p as ae}from"../../../../../../../chunks/index-2cc7f77f.js";import{r as J,s as W,u as _e,a as he,x as ve,d as ye,T as Ie,C as Ee,b as ke}from"../../../../../../../chunks/firebase-8ec4c989.js";import{g as we}from"../../../../../../../chunks/navigation-75ff2ebc.js";import{E as xe}from"../../../../../../../chunks/Editor-52e1c4d7.js";import"../../../../../../../chunks/index.esm2017-523da5de.js";import"../../../../../../../chunks/singletons-b88798ed.js";function Te(b){let s,t,k,U,e,g,_,u,d,o,w,i;return{c(){s=f("div"),t=f("div"),k=q("Image"),U=V(),e=f("button"),g=q("Ganti Image"),_=V(),u=f("div"),d=f("img"),this.h()},l(r){s=m(r,"DIV",{class:!0});var c=I(s);t=m(c,"DIV",{});var x=I(t);k=A(x,"Image"),x.forEach(n),U=R(c),e=m(c,"BUTTON",{class:!0});var h=I(e);g=A(h,"Ganti Image"),h.forEach(n),c.forEach(n),_=R(r),u=m(r,"DIV",{});var T=I(u);d=m(T,"IMG",{src:!0,alt:!0}),T.forEach(n),this.h()},h(){l(e,"class","py-1 px-2 bg-sky-900 rounded text-white"),l(s,"class","flex justify-between items-center"),te(d.src,o=b[4])||l(d,"src",o),l(d,"alt","")},m(r,c){C(r,s,c),a(s,t),a(t,k),a(s,U),a(s,e),a(e,g),C(r,_,c),C(r,u,c),a(u,d),w||(i=F(e,"click",b[15]),w=!0)},p(r,c){c&16&&!te(d.src,o=r[4])&&l(d,"src",o)},d(r){r&&n(s),r&&n(_),r&&n(u),w=!1,i()}}}function De(b){let s,t,k,U,e,g,_,u,d,o,w,i,r,c,x,h,T;return{c(){s=f("div"),t=f("label"),k=q("Image"),U=V(),e=f("button"),g=q("Batal"),_=V(),u=f("div"),d=f("div"),o=f("div"),w=V(),i=f("input"),r=V(),c=f("div"),x=q("Sangat disarankan mengunakan foto dengan aspect ratio 16:9 !"),this.h()},l(y){s=m(y,"DIV",{class:!0});var v=I(s);t=m(v,"LABEL",{for:!0});var M=I(t);k=A(M,"Image"),M.forEach(n),U=R(v),e=m(v,"BUTTON",{class:!0});var D=I(e);g=A(D,"Batal"),D.forEach(n),v.forEach(n),_=R(y),u=m(y,"DIV",{class:!0});var B=I(u);d=m(B,"DIV",{class:!0});var L=I(d);o=m(L,"DIV",{style:!0,class:!0}),I(o).forEach(n),L.forEach(n),w=R(B),i=m(B,"INPUT",{class:!0,type:!0,accept:!0,name:!0,id:!0}),r=R(B),c=m(B,"DIV",{class:!0});var O=I(c);x=A(O,"Sangat disarankan mengunakan foto dengan aspect ratio 16:9 !"),O.forEach(n),B.forEach(n),this.h()},h(){l(t,"for","image"),l(e,"class","py-1 px-2 bg-red-900 rounded text-white"),l(s,"class","flex justify-between items-center"),ae(o,"width",b[3]),l(o,"class","h-1 bg-sky-900 transition-transform duration-300"),l(d,"class","w-full h-1 bg-slate-300 mt-1 mb-2"),l(i,"class","px-4 py-1 rounded text-sm cursor-pointer"),l(i,"type","file"),l(i,"accept","image/*"),l(i,"name","image"),l(i,"id","image"),l(c,"class","text-xs px-2 mb-1 font-bold"),l(u,"class","bg-white rounded")},m(y,v){C(y,s,v),a(s,t),a(t,k),a(s,U),a(s,e),a(e,g),C(y,_,v),C(y,u,v),a(u,d),a(d,o),a(u,w),a(u,i),a(u,r),a(u,c),a(c,x),h||(T=[F(e,"click",b[13]),F(i,"input",b[8]),F(i,"change",b[14])],h=!0)},p(y,v){v&8&&ae(o,"width",y[3])},d(y){y&&n(s),y&&n(_),y&&n(u),h=!1,se(T)}}}function Ue(b){let s,t,k,U,e,g,_,u,d,o,w,i,r,c,x,h,T,y,v,M,D,B,L,O,E;function K(p){b[12](p)}let G={scriptSrc:"http://127.0.0.1:3000/tinymce/tinymce.min.js",apiKey:"8yjj0pk6spamsan2bcc7scpep4hxu72c5q9q4vf7mmyr2t84"};b[0]!==void 0&&(G.value=b[0]),h=new xe({props:G}),ie.push(()=>ne(h,"value",K));function j(p,N){return p[5]?De:Te}let Q=j(b),S=Q(b);return{c(){s=f("section"),t=f("div"),k=q("Update berita"),U=V(),e=f("form"),g=f("div"),_=f("label"),u=q("Title"),d=V(),o=f("input"),w=V(),i=f("div"),r=f("label"),c=q("Body"),x=V(),de(h.$$.fragment),y=V(),v=f("div"),S.c(),M=V(),D=f("input"),this.h()},l(p){s=m(p,"SECTION",{class:!0});var N=I(s);t=m(N,"DIV",{class:!0});var z=I(t);k=A(z,"Update berita"),z.forEach(n),U=R(N),e=m(N,"FORM",{class:!0,method:!0});var P=I(e);g=m(P,"DIV",{class:!0});var Y=I(g);_=m(Y,"LABEL",{for:!0});var X=I(_);u=A(X,"Title"),X.forEach(n),d=R(Y),o=m(Y,"INPUT",{type:!0,class:!0,name:!0,id:!0}),Y.forEach(n),w=R(P),i=m(P,"DIV",{class:!0});var H=I(i);r=m(H,"LABEL",{for:!0});var Z=I(r);c=A(Z,"Body"),Z.forEach(n),x=R(H),ce(h.$$.fragment,H),H.forEach(n),y=R(P),v=m(P,"DIV",{class:!0});var $=I(v);S.l($),$.forEach(n),M=R(P),D=m(P,"INPUT",{class:!0,type:!0}),P.forEach(n),N.forEach(n),this.h()},h(){l(t,"class","py-2 font-semibold text-lg uppercase"),l(_,"for","title"),l(o,"type","text"),l(o,"class","py-1 px-4 text-sm rounded"),l(o,"name","title"),l(o,"id","title"),l(g,"class","flex flex-col font-semibold gap-1"),l(r,"for","title"),l(i,"class","flex flex-col font-semibold gap-1 z-0"),l(v,"class","flex flex-col font-semibold gap-1 z-0"),l(D,"class",B=b[6]+" py-2 px-4 font-bold rounded block cursor-pointer"),D.disabled=b[7],l(D,"type","submit"),D.value="Update",l(e,"class","flex flex-col gap-4"),l(e,"method","post"),l(s,"class","dashboard-section")},m(p,N){C(p,s,N),a(s,t),a(t,k),a(s,U),a(s,e),a(e,g),a(g,_),a(_,u),a(g,d),a(g,o),ee(o,b[1]),a(e,w),a(e,i),a(i,r),a(r,c),a(i,x),ue(h,i,null),a(e,y),a(e,v),S.m(v,null),a(e,M),a(e,D),L=!0,O||(E=[F(o,"input",b[11]),F(e,"submit",fe(b[9]))],O=!0)},p(p,[N]){N&2&&o.value!==p[1]&&ee(o,p[1]);const z={};!T&&N&1&&(T=!0,z.value=p[0],me(()=>T=!1)),h.$set(z),Q===(Q=j(p))&&S?S.p(p,N):(S.d(1),S=Q(p),S&&(S.c(),S.m(v,null))),(!L||N&64&&B!==(B=p[6]+" py-2 px-4 font-bold rounded block cursor-pointer"))&&l(D,"class",B),(!L||N&128)&&(D.disabled=p[7])},i(p){L||(pe(h.$$.fragment,p),L=!0)},o(p){be(h.$$.fragment,p),L=!1},d(p){p&&n(s),ge(h),S.d(),O=!1,se(E)}}}function Be(b,s,t){let{data:k}=s,U=k.id,e=k.data,g=e.body,_=e.title,u=e.imageName,d,o=0,w=e.imageUrl,i=e.imageName,r=!1,c=new Date,x=J(W,"images/"+e.imageName);console.log(d);let h="bg-green-500 text-white hover:bg-green-400",T="";const y=()=>{setTimeout(()=>{const E=d[0],K=E.name.split(".").pop();i=`${c.getDate()}-${c.getMonth().toString()}-${c.getFullYear().toString()}-berita-${Math.floor(Math.random()*1e4+1)}.${K}`,x=J(W,"images/"+i),_e(x,E).on("state_changed",j=>{t(3,o=j.bytesTransferred/j.totalBytes*100+"%")},j=>{alert(j)},()=>{t(4,w=URL.createObjectURL(E)),t(5,r=!1),t(6,h="bg-green-500 text-white hover:bg-green-400"),t(7,T="")})},300)},v=async()=>{t(6,h="bg-slate-300 text-slate-500"),t(7,T="disabled"),await he(J(x)).then(E=>{t(4,w=E)}).catch(E=>{alert("error")});try{const E=ve(ye,"berita",U),K=await Ie(E,{title:_,body:g,imageUrl:w,imageName:i,updateAt:Ee()});alert("berita berhasil di update");const G=J(W,"images/"+u);ke(G).catch(j=>alert(j)),we("/dashboard/berita")}catch(E){console.error("Error adding document: ",E),t(6,h="bg-green-500 text-white hover:bg-green-400"),t(7,T="")}};function M(){_=this.value,t(1,_)}function D(E){g=E,t(0,g)}const B=()=>t(5,r=!1);function L(){d=this.files,t(2,d)}const O=()=>t(5,r=!0);return b.$$set=E=>{"data"in E&&t(10,k=E.data)},[g,_,d,o,w,r,h,T,y,v,k,M,D,B,L,O]}class Me extends le{constructor(s){super(),re(this,s,Be,Ue,oe,{data:10})}}export{Me as default};
